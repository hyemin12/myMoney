import { useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';
import { useReview } from '@/hooks/useReview';
import Header from '@/layout/Header';
import ReviewForm from '../../components/Review/ReviewForm';
import { IReview } from '@/models/review.model';

//확인용 -> 데이터 받는 로직으로 변경해야 함
const data = {
  categoryId: 2,
  content: '<p>내용</p>',
  receiptImg:
    'data:image/jpeg;base64,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',
  reviewImg: [
    'data:image/jpeg;base64,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',
    'data:image/jpeg;base64,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',
  ],
  stars: 5,
  title: '제목',
};

function EditReview() {
  //const [review, setReview] = useState<IReview | null>(null);
  const [title, setTitle] = useState<string>(data.title);
  const [content, setContent] = useState<string>(data.content);
  const [ratingIndex, setRatingIndex] = useState<number>(data.stars);
  const [categoryIndex, setCategoryIndex] = useState<number>(data.categoryId);
  const [receiptImg, setReceiptImg] = useState<string>(data.receiptImg);
  const [photoToAddList, setPhotoToAddList] = useState<string[]>(
    data.reviewImg,
  );

  const { id } = useParams();
  console.log('id', id);

  //데이터 가져오기
  //const { updateReview } = useReview();

  const isFormValid =
    title.trim() !== '' &&
    content.trim() !== '' &&
    photoToAddList.length > 0 &&
    receiptImg !== '';

  const handleSubmit = () => {
    const data = {
      id,
      title,
      content,
      stars: ratingIndex,
      categoryId: categoryIndex,
      reviewImg: photoToAddList,
      receiptImg,
    };
    console.log('update', data);
    //updateReview(data);
  };

  return (
    <>
      <Header showBackButton={true} title="리뷰 수정" />
      <ReviewForm
        titleValue={title}
        contentValue={content}
        setTitle={setTitle}
        setContent={setContent}
        ratingIndex={ratingIndex}
        setRatingIndex={setRatingIndex}
        categoryIndex={categoryIndex}
        setCategoryIndex={setCategoryIndex}
        receiptImg={receiptImg}
        setReceiptImg={setReceiptImg}
        photoToAddList={photoToAddList}
        setPhotoToAddList={setPhotoToAddList}
        handleSubmit={handleSubmit}
        isFormValid={isFormValid}
      />
    </>
  );
}

export default EditReview;
